<!-- tracking_app/templates/tracking_app/dashboard.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Keyboard Heatmap</title>
    <style>
        .keyboard {
            display: flex;
            flex-direction: column;
            gap: 5px;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 10px;
            width: fit-content;
            margin: 0 auto;
        }

        .row {
            display: flex;
            gap: 5px;
            justify-content: center;
        }

        .key {
    padding: 15px;
    background: #ddd; 
    border-radius: 5px;
    text-align: center;
    cursor: pointer;
    transition: background 0.3s;
    min-width: 40px;
}

        .key:hover {
            background: #ccc;
        }
    </style>
</head>
<body>
    <h1>Keyboard Heatmap</h1>
    <div class="keyboard">
        <!-- First Row: Numbers -->
        <div class="row">
            <div class="key" data-key="1">1</div>
            <div class="key" data-key="2">2</div>
            <div class="key" data-key="3">3</div>
            <div class="key" data-key="4">4</div>
            <div class="key" data-key="5">5</div>
            <div class="key" data-key="6">6</div>
            <div class="key" data-key="7">7</div>
            <div class="key" data-key="8">8</div>
            <div class="key" data-key="9">9</div>
            <div class="key" data-key="0">0</div>
        </div>
    
        <!-- Second Row: Letters (Q-P) -->
        <div class="row">
            <div class="key" data-key="q">q</div>
            <div class="key" data-key="w">w</div>
            <div class="key" data-key="e">e</div>
            <div class="key" data-key="r">r</div>
            <div class="key" data-key="t">t</div>
            <div class="key" data-key="y">y</div>
            <div class="key" data-key="u">u</div>
            <div class="key" data-key="i">i</div>
            <div class="key" data-key="o">o</div>
            <div class="key" data-key="p">p</div>
        </div>
    
        <!-- Third Row: Letters (A-L) -->
        <div class="row">
            <div class="key" data-key="a">a</div>
            <div class="key" data-key="s">s</div>
            <div class="key" data-key="d">d</div>
            <div class="key" data-key="f">f</div>
            <div class="key" data-key="g">g</div>
            <div class="key" data-key="h">h</div>
            <div class="key" data-key="j">j</div>
            <div class="key" data-key="k">k</div>
            <div class="key" data-key="l">l</div>
        </div>
    
        <!-- Fourth Row: Letters (Z-M) -->
        <div class="row">
            <div class="key" data-key="z">z</div>
            <div class="key" data-key="x">x</div>
            <div class="key" data-key="c">c</div>
            <div class="key" data-key="v">v</div>
            <div class="key" data-key="b">b</div>
            <div class="key" data-key="n">n</div>
            <div class="key" data-key="m">m</div>
        </div>
        
    </div>
    </div>

    <script>
        // Load key press counts from Django context
        const keyPressCounts = JSON.parse('{{ key_press_counts|escapejs }}');
    
        // Debug: Log key press counts
        console.log("Key Press Counts:", keyPressCounts);
    
        // Function to update key color based on press count
        function updateKeyColor(keyElement, count) {
            const intensity = Math.min(count / 10, 1); // Normalize intensity (0 to 1)
            const red = Math.floor(255 * intensity);   // Red increases with intensity
            const green = Math.floor(255 * (1 - intensity)); // Green decreases with intensity
            keyElement.style.backgroundColor = `rgb(${red}, ${green}, 0)`; // Yellow to red gradient
        }
    
        // Update key colors based on counts
        document.querySelectorAll('.key').forEach(keyElement => {
            const key = keyElement.getAttribute('data-key'); // Get the key name (e.g., 'A', '1')
            const count = keyPressCounts[key] || 0; // Default to 0 if key not found
            console.log(`Key: ${key}, Count: ${count}`); // Debug: Log key and count
            updateKeyColor(keyElement, count); // Update the key color
        });
    </script>
</body>
</html>